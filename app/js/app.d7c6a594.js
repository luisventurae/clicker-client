(function(e){function t(t){for(var o,a,s=t[0],u=t[1],l=t[2],c=0,f=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);m&&m(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},i=[];function a(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"b25d4269"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=a(e);var l=new Error;i=function(t){u.onerror=u.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}r[e]=void 0}};var c=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var m=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},2313:function(e,t,n){},"451f":function(e,t,n){"use strict";var o=n("2313"),r=n.n(o);r.a},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],a=n("2877"),s={},u=Object(a["a"])(s,r,i,!1,null,null,null),l=u.exports,c=(n("d3b7"),n("8c4f")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"rooms"},[e.joined?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{placeholder:"Nombre de usuario",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e.joined?e._e():n("button",{on:{click:function(t){return e.setRoom("sala")}}},[e._v(" Unirse a la sala ")]),e.joined?n("button",{on:{click:e.leaveFromRoom}},[e._v(" Salir de la sala ")]):e._e()]),n("Board")],1)},f=[],p=n("5530"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board"},[n("div",{staticClass:"board-container"},e._l(e.players,(function(e){return n("div",{key:e.username},[n("Pointer",{attrs:{username:e.username,fill:e.color,x:e.x,y:e.y}})],1)})),0)])},v=[],y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"float",style:"left: "+e.x+"px; top: "+e.y+"px;"},[n("div",{staticClass:"float-content"},[n("svg",{staticStyle:{"enable-background":"new 0 0 512.004 512.004"},attrs:{fill:e.fill,width:e.size,heigth:e.size,version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512.004 512.004","xml:space":"preserve"}},[n("g",[n("g",[n("path",{attrs:{d:"M434.2,344.473L92.866,3.14c-3.029-3.051-7.616-3.989-11.605-2.325c-3.989,1.643-6.592,5.547-6.592,9.856v490.667 c0,4.395,2.688,8.32,6.763,9.92c1.259,0.512,2.581,0.747,3.904,0.747c2.901,0,5.76-1.195,7.808-3.413l135.509-145.92h198.016 c4.309,0,8.213-2.603,9.856-6.592C438.168,352.111,437.272,347.524,434.2,344.473z"}})])])]),n("span",{staticClass:"caption"},[e._v(e._s(e.username))])])])},h=[],b=(n("a9e3"),{name:"pointer",props:{username:{type:String,required:!0},fill:{type:String,default:"#00000"},x:{type:Number,default:0},y:{type:Number,default:0},size:{type:Number,default:16}}}),P=b,w=(n("451f"),Object(a["a"])(P,y,h,!1,null,null,null)),_=w.exports,j=n("2f62"),E={name:"board",components:{Pointer:_},created:function(){this.watchPointerPosition()},computed:Object(j["c"])(["players"]),methods:Object(p["a"])(Object(p["a"])({},Object(j["b"])(["joinRoom","emitPosition"])),{},{watchPointerPosition:function(){var e=this;window.onmousemove=function(){var t=window.event.clientX,n=window.event.clientY;e.emitPosition({x:t,y:n})}}})},O=E,g=Object(a["a"])(O,d,v,!1,null,null,null),x=g.exports,S={name:"Home",components:{Board:x},data:function(){return{username:"",joined:!1}},created:function(){this.beforeCloseWindow()},methods:Object(p["a"])(Object(p["a"])({},Object(j["b"])(["joinRoom","listenPlayers","leavePlayer","listPlayers","listenPositions"])),{},{setRoom:function(e){e&&this.username&&(this.joinRoom({room:e,username:this.username}),this.listPlayers(),this.listenPlayers(),this.listenPositions(),this.joined=!0)},beforeCloseWindow:function(){var e=this;window.onbeforeunload=function(){e.leavePlayer()}},leaveFromRoom:function(){this.leavePlayer(),this.username="",this.joined=!1}})},R=S,T=Object(a["a"])(R,m,f,!1,null,null,null),A=T.exports;o["a"].use(c["a"]);var L=[{path:"/",name:"Home",component:A},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],k=new c["a"]({mode:"history",base:"/",routes:L}),C=k,M=(n("4de4"),n("7db0"),n("d81d"),n("8055")),Y=n.n(M),N=Y()("https://clickerio.herokuapp.com/"),D={username:null,room:null,players:[]},I={players:function(e){return e.players.filter((function(e){return!e.me}))}},U={SET_USERNAME:function(e,t){e.username=t},SET_ROOM:function(e,t){e.room=t},SET_PLAYERS:function(e,t){e.players=t},ADD_PLAYER:function(e,t){e.players.push(t)},QUIT_PLAYER:function(e,t){e.players=e.players.filter((function(e){return e.username!==t.username}))},SET_POSITION_PLAYER:function(e,t){var n=e.players.find((function(e){return e.username===t.username}));n.x=t.x,n.y=t.y}},$={joinRoom:function(e,t){if(t.room){var n={room:t.room,username:t.username,color:"#000",x:-100,y:-100};N.emit("server:join:room",n),e.commit("SET_ROOM",t.room),e.commit("SET_USERNAME",t.username),e.commit("ADD_PLAYER",Object(p["a"])(Object(p["a"])({},n),{},{me:!0}))}},listenPlayers:function(e){N.on("client:new:player",(function(t){console.log("ext",t),t.color="blue",e.commit("ADD_PLAYER",t)})),N.on("client:leave:player",(function(t){e.commit("QUIT_PLAYER",t)}))},emitPosition:function(e,t){var n=t.x,o=t.y;e.state.room&&N.emit("server:position",{username:e.state.username,room:e.state.room,x:n,y:o})},listPlayers:function(e){N.on("client:room:players",(function(t){t=t.map((function(t){return t.username===e.state.username&&(t.me=!0,t.room=e.state.room),t})),e.commit("SET_PLAYERS",t)}))},listenPositions:function(e){N.on("client:position",(function(t){e.commit("SET_POSITION_PLAYER",t)}))},leavePlayer:function(e){if(e.state.room){var t=e.state.players.find((function(e){return e.me}));t&&(N.emit("server:leave:player",t),N.removeListener("client:new:player"),N.removeListener("client:leave:player"),N.removeListener("client:position"),e.commit("SET_PLAYERS",[]),e.commit("SET_ROOM",null),e.commit("SET_USERNAME",null))}}},z={actions:$,state:D,mutations:U,getters:I};o["a"].use(j["a"]);var q=new j["a"].Store({modules:{cursor:z}});o["a"].config.productionTip=!1,new o["a"]({router:C,store:q,render:function(e){return e(l)}}).$mount("#app")}});
//# sourceMappingURL=app.d7c6a594.js.map